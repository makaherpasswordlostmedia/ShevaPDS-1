<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:background="#000000">

    <!-- ===== LEFT: CRT Screen ===== -->
    <FrameLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="3"
        android:background="#000000">

        <com.imlac.pds1.CrtView
            android:id="@+id/crt_view"
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>

        <TextView
            android:id="@+id/tv_fps"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="top|start"
            android:layout_margin="6dp"
            android:text="30fps"
            android:textColor="#224422"
            android:textSize="9sp"
            android:fontFamily="monospace"/>
    </FrameLayout>

    <!-- ===== RIGHT: Control Panel ===== -->
    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1.35"
        android:orientation="vertical"
        android:background="#0A0A0A"
        android:paddingStart="5dp"
        android:paddingEnd="5dp"
        android:paddingTop="3dp"
        android:paddingBottom="3dp">

        <!-- REGISTERS -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:background="#050505"
            android:padding="2dp">
            <TextView android:id="@+id/reg_pc"   style="@style/RegStyle" android:text="PC:0000"/>
            <TextView android:id="@+id/reg_ac"   style="@style/RegStyle" android:text="AC:0000"/>
            <TextView android:id="@+id/reg_ir"   style="@style/RegStyle" android:text="IR:0000"/>
            <TextView android:id="@+id/reg_link" style="@style/RegStyle" android:text="L:0"/>
            <TextView android:id="@+id/reg_dpx"  style="@style/RegStyle" android:text="DX:000"/>
            <TextView android:id="@+id/reg_dpy"  style="@style/RegStyle" android:text="DY:000"/>
            <View android:layout_width="0dp" android:layout_height="1dp" android:layout_weight="1"/>
            <TextView android:id="@+id/status_text" style="@style/RegStyle"
                android:text="HALT" android:textColor="#FF3300"/>
        </LinearLayout>

        <!-- FPS SLIDER -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:gravity="center_vertical"
            android:layout_marginTop="3dp">
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="FPS " android:textColor="#333333"
                android:textSize="8sp" android:fontFamily="monospace"/>
            <SeekBar
                android:id="@+id/sb_fps"
                android:layout_width="0dp"
                android:layout_height="18dp"
                android:layout_weight="1"
                android:max="59" android:progress="29"
                android:progressTint="#004400"
                android:thumbTint="#00AA22"/>
        </LinearLayout>

        <!-- MACHINE BUTTONS -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_marginTop="3dp">
            <Button android:id="@+id/btn_power" style="@style/PanelBtn"
                android:text="PWR" android:backgroundTint="#002200"/>
            <Button android:id="@+id/btn_reset" style="@style/PanelBtn" android:text="RST"/>
            <Button android:id="@+id/btn_run"   style="@style/PanelBtn"
                android:text="RUN" android:backgroundTint="#002200"/>
            <Button android:id="@+id/btn_halt"  style="@style/PanelBtn"
                android:text="HLT" android:backgroundTint="#220000"/>
            <Button android:id="@+id/btn_step"  style="@style/PanelBtn" android:text="STP"/>
        </LinearLayout>

        <!-- DEMO BUTTONS -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_marginTop="2dp">
            <Button android:id="@+id/btn_demo_star"      style="@style/DemoBtn" android:text="STAR"/>
            <Button android:id="@+id/btn_demo_lines"     style="@style/DemoBtn" android:text="LINE"/>
            <Button android:id="@+id/btn_demo_lissajous" style="@style/DemoBtn" android:text="LISS"/>
            <Button android:id="@+id/btn_demo_bounce"    style="@style/DemoBtn" android:text="BNCE"/>
            <Button android:id="@+id/btn_demo_maze"      style="@style/DemoBtn" android:text="MAZE"/>
            <Button android:id="@+id/btn_demo_spacewar"  style="@style/DemoBtn" android:text="SWAR"/>
        </LinearLayout>

        <!-- MAZE WAR + GAMES buttons side by side -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_marginTop="3dp">

            <Button
                android:id="@+id/btn_mazewar"
                android:layout_width="0dp"
                android:layout_height="26dp"
                android:layout_weight="1"
                android:text="MAZE WAR"
                android:textColor="#00FF41"
                android:textSize="8sp"
                android:fontFamily="monospace"
                android:backgroundTint="#001800"
                android:layout_marginEnd="2dp"/>

            <Button
                android:id="@+id/btn_games"
                android:layout_width="0dp"
                android:layout_height="26dp"
                android:layout_weight="1"
                android:text="GAMES"
                android:textColor="#4488FF"
                android:textSize="8sp"
                android:fontFamily="monospace"
                android:backgroundTint="#05050F"/>

        </LinearLayout>

        <!-- DIVIDER -->
        <View android:layout_width="match_parent" android:layout_height="1dp"
            android:background="#181818"
            android:layout_marginTop="5dp"
            android:layout_marginBottom="5dp"/>

        <!-- CONTROLLER LABEL -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="CONTROLLER"
            android:textColor="#222222"
            android:textSize="7sp"
            android:fontFamily="monospace"
            android:layout_marginBottom="4dp"/>

        <!-- CONTROLLER ROW: D-PAD left, ACTION BUTTONS right -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:orientation="horizontal">

            <!-- D-PAD: 3x3 grid using nested LinearLayouts -->
            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:orientation="vertical"
                android:layout_marginEnd="6dp">

                <!-- Row 1: [empty] [UP] [empty] -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="0dp"
                    android:layout_weight="1"
                    android:orientation="horizontal">
                    <View android:layout_width="0dp" android:layout_height="match_parent" android:layout_weight="1"/>
                    <Button
                        android:id="@+id/dp_up"
                        android:layout_width="0dp"
                        android:layout_height="match_parent"
                        android:layout_weight="1"
                        android:text="▲"
                        style="@style/DpadBtn"/>
                    <View android:layout_width="0dp" android:layout_height="match_parent" android:layout_weight="1"/>
                </LinearLayout>

                <!-- Row 2: [LEFT] [center dot] [RIGHT] -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="0dp"
                    android:layout_weight="1"
                    android:orientation="horizontal">
                    <Button
                        android:id="@+id/dp_left"
                        android:layout_width="0dp"
                        android:layout_height="match_parent"
                        android:layout_weight="1"
                        android:text="◀"
                        style="@style/DpadBtn"/>
                    <View
                        android:layout_width="0dp"
                        android:layout_height="match_parent"
                        android:layout_weight="1"
                        android:background="#0A150A"/>
                    <Button
                        android:id="@+id/dp_right"
                        android:layout_width="0dp"
                        android:layout_height="match_parent"
                        android:layout_weight="1"
                        android:text="▶"
                        style="@style/DpadBtn"/>
                </LinearLayout>

                <!-- Row 3: [empty] [DOWN] [empty] -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="0dp"
                    android:layout_weight="1"
                    android:orientation="horizontal">
                    <View android:layout_width="0dp" android:layout_height="match_parent" android:layout_weight="1"/>
                    <Button
                        android:id="@+id/dp_down"
                        android:layout_width="0dp"
                        android:layout_height="match_parent"
                        android:layout_weight="1"
                        android:text="▼"
                        style="@style/DpadBtn"/>
                    <View android:layout_width="0dp" android:layout_height="match_parent" android:layout_weight="1"/>
                </LinearLayout>

            </LinearLayout>

            <!-- ACTION BUTTONS: 2x2 grid -->
            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:orientation="vertical">

                <!-- Top row: B | A -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="0dp"
                    android:layout_weight="1"
                    android:orientation="horizontal">
                    <Button
                        android:id="@+id/btn_b"
                        android:layout_width="0dp"
                        android:layout_height="match_parent"
                        android:layout_weight="1"
                        android:text="B"
                        android:textColor="#4466AA"
                        android:backgroundTint="#00081A"
                        style="@style/ActionBtn"/>
                    <Button
                        android:id="@+id/btn_a"
                        android:layout_width="0dp"
                        android:layout_height="match_parent"
                        android:layout_weight="1"
                        android:text="A"
                        android:textColor="#00FF41"
                        android:backgroundTint="#001800"
                        style="@style/ActionBtn"/>
                </LinearLayout>

                <!-- Bottom row: D | C -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="0dp"
                    android:layout_weight="1"
                    android:orientation="horizontal">
                    <Button
                        android:id="@+id/btn_d"
                        android:layout_width="0dp"
                        android:layout_height="match_parent"
                        android:layout_weight="1"
                        android:text="D"
                        android:textColor="#FFAA00"
                        android:backgroundTint="#150F00"
                        style="@style/ActionBtn"/>
                    <Button
                        android:id="@+id/btn_c"
                        android:layout_width="0dp"
                        android:layout_height="match_parent"
                        android:layout_weight="1"
                        android:text="C"
                        android:textColor="#FF4400"
                        android:backgroundTint="#150000"
                        style="@style/ActionBtn"/>
                </LinearLayout>

            </LinearLayout>

        </LinearLayout>

        <!-- KEY HINT -->
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="A=SPACE  B=F  C=E  D=Q  |  ▲▼◀▶=WASD"
            android:textColor="#1C1C1C"
            android:textSize="7sp"
            android:fontFamily="monospace"
            android:layout_marginTop="3dp"/>

    </LinearLayout>

</LinearLayout>
